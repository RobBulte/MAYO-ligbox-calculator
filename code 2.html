<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAYO Ligbox Calculator</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
            color: #333;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
        }
        .container {
            max-width: 800px;
            margin: auto;
        }
        form {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .input-group {
            margin-bottom: 15px;
        }
        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        #result {
            margin-top: 20px;
            background-color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 5px rgba(0,0,0,0.1);
        }
        .advice, .suggestion {
            font-family: 'Georgia', serif;
            font-style: italic;
            font-size: 1.1em;
            margin-top: 10px;
        }
        .advice {
            color: red;
        }
        #buttons {
            margin-top: 20px;
        }
        button {
            padding: 10px 15px;
            margin-right: 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            background-color: #3498db;
            color: white;
            font-size: 16px;
        }
        button:hover {
            background-color: #2980b9;
        }
        @media (min-width: 600px) {
            .input-group {
                display: flex;
                align-items: center;
            }
            label {
                width: 30%;
                margin-right: 5%;
            }
            input, select {
                width: 65%;
            }
            button {
                width: auto;
            }
        }
        @media (max-width: 600px) {
            form, #result {
                padding: 10px;
            }
            input, select, button {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>MAYO Ligbox Calculator</h1>
        <form id="calculatorForm">
            <div class="input-group">
                <label for="length">Lengte in cm:</label>
                <input type="number" id="length" required min="1" placeholder="Voorbeeld: 2000" aria-label="Voer de lengte in cm in">
            </div>

            <div class="input-group">
                <label for="width">Diepte in cm:</label>
                <input type="number" id="width" required min="1" placeholder="Voorbeeld: 300" aria-label="Voer de diepte in cm in">
            </div>

            <div class="input-group">
                <label for="boxWidth">Ligboxbreedte:</label>
                <select id="boxWidth" aria-label="Selecteer de ligboxbreedte">
                    <option value="110">110 cm</option>
                    <option value="112.5">112,5 cm</option>
                    <option value="115">115 cm</option>
                    <option value="117.5">117,5 cm</option>
                    <option value="120">120 cm</option>
                    <option value="122.5">122,5 cm</option>
                    <option value="125">125 cm</option>
                </select>
            </div>

            <div class="input-group">
                <label for="beugelLength">Beugel lengte:</label>
                <select id="beugelLength" aria-label="Selecteer de beugellengte">
                    <option value="175">175 cm</option>
                    <option value="183">183 cm</option>
                    <option value="198">198 cm</option>
                    <option value="206">206 cm</option>
                    <option value="213">213 cm</option>
                </select>
            </div>

            <div class="input-group">
                <label for="leftWall">Is er links een muur/wand sterk genoeg als afscheiding?</label>
                <select id="leftWall" aria-label="Is linker muur/wand sterk genoeg?">
                    <option value="yes">Ja</option>
                    <option value="no">Nee</option>
                </select>
            </div>

            <div class="input-group">
                <label for="rightWall">Is er rechts een muur/wand sterk genoeg als afscheiding?</label>
                <select id="rightWall" aria-label="Is rechter muur/wand sterk genoeg?">
                    <option value="yes">Ja</option>
                    <option value="no">Nee</option>
                </select>
            </div>

            <div class="input-group">
                <label for="doubleRow">Betreft het een dubbele rij?</label>
                <select id="doubleRow" aria-label="Betreft het een dubbele rij?">
                    <option value="no">Nee</option>
                    <option value="yes">Ja</option>
                </select>
            </div>

            <div id="result"></div>
            <div id="contact-info">
                <h2>Contactinformatie</h2>
                <div class="input-group">
                    <label for="name">Naam:</label>
                    <input type="text" id="name" placeholder="Voer uw naam in" required aria-label="Voer uw naam in">
                </div>
                <div class="input-group">
                    <label for="address">Straat + Huisnummer:</label>
                    <input type="text" id="address" placeholder="Voer uw adres in" required aria-label="Voer uw adres in">
                </div>
                <div class="input-group">
                    <label for="postcode">Postcode:</label>
                    <input type="text" id="postcode" placeholder="Voer uw postcode in" required aria-label="Voer uw postcode in">
                </div>
                <div class="input-group">
                    <label for="place">Plaats:</label>
                    <input type="text" id="place" placeholder="Voer uw plaats in" required aria-label="Voer uw plaats in">
                </div>
                <div class="input-group">
                    <label for="phone">Tel.:</label>
                    <input type="tel" id="phone" placeholder="Voer uw telefoonnummer in" required aria-label="Voer uw telefoonnummer in">
                </div>
                <div class="input-group">
                    <label for="email">Mail:</label>
                    <input type="email" id="email" placeholder="Voer uw e-mailadres in" required aria-label="Voer uw e-mailadres in">
                </div>
            </div>
            <div id="buttons">
                <button type="button" id="print">PRINT</button>
                <button type="button" id="mail">MAIL</button>
                <button type="button" id="whatsapp">WHATSAPP</button>
            </div>
        </form>
    </div>

    <script>
        function calculate() {
            const length = parseFloat(document.getElementById('length').value);
            const width = parseFloat(document.getElementById('width').value);
            const beugelLength = parseFloat(document.getElementById('beugelLength').value);
            const selectedBoxWidth = parseFloat(document.getElementById('boxWidth').value);
            const leftWall = document.getElementById('leftWall').value === 'yes';
            const rightWall = document.getElementById('rightWall').value === 'yes';
            const doubleRow = document.getElementById('doubleRow').value === 'yes';
            const availableBoxWidths = [110, 112.5, 115, 117.5, 120, 122.5, 125];

            if (isNaN(length) || isNaN(width) || length <= 0 || width <= 0) {
                document.getElementById('result').innerHTML = "<p class='advice'>⚠️ Voer geldige getallen in voor lengte en diepte die groter zijn dan 0.</p>";
                return;
            }

            let bestBoxWidth = availableBoxWidths[0];
            let minRemainingLength = length;

            availableBoxWidths.forEach(boxWidth => {
                const remainingLength = length % boxWidth;
                if (remainingLength < minRemainingLength) {
                    minRemainingLength = remainingLength;
                    bestBoxWidth = boxWidth;
                }
            });

            let numberOfBoxes = Math.floor(length / selectedBoxWidth);
            let effectiveNumberOfBoxes = numberOfBoxes;
            
            let numberOfHeadBoards = effectiveNumberOfBoxes - 2;
            if (doubleRow) {
                effectiveNumberOfBoxes *= 2; 
                numberOfHeadBoards = Math.floor(effectiveNumberOfBoxes / 2) - 2;
            }

            let numberOfPosts = numberOfBoxes; 
            if (!leftWall && !rightWall) {
                numberOfPosts += 1; 
            } else if (leftWall && rightWall) {
                numberOfPosts -= 1; 
            }

            let numberOfBrackets = numberOfPosts;
            if (doubleRow) {
                numberOfBrackets *= 2; 
            }

            let numberOfWavyWithers = effectiveNumberOfBoxes;
            let numberOfCouplers = numberOfBrackets;

            let numberOfEndPiecesWithers = doubleRow ? 4 : 2;
            let numberOfEndPiecesHeadWithers = doubleRow ? 6 : 4;

            const remainingLength = length % selectedBoxWidth;
            let spaceBehindBracket = doubleRow ? (width - (2 * beugelLength) - 7) / 2 : width - (beugelLength + 13);

            let numberOfClosingPlates = doubleRow ? 0 : numberOfPosts * 2;
            let numberOfConcreteAnchors = numberOfPosts * 4;
            let numberOfM12x100 = doubleRow ? numberOfPosts * 10 : numberOfPosts * 8;
            let numberOfM10x60 = numberOfBrackets * 2 + (doubleRow ? 4 : 2);
            let numberOfPlasticCaps = numberOfPosts;
            let numberOfCapBrackets = numberOfBrackets;
            let numberOfUBolts = numberOfBrackets * 3;
            let numberOfMAYOMattresses = effectiveNumberOfBoxes;
            let numberOfMAYOStrips = effectiveNumberOfBoxes + 1 + (doubleRow ? 1 : 0);
            
            // Adjust number of knee rails when it's a double row
            let numberOfKneeRails = Math.ceil(length / 220);
            if (doubleRow) {
                numberOfKneeRails *= 2;
            }

            let advice = "";
            if (spaceBehindBracket > 35) {
                advice = `<span class="advice">⚠️ MAYO adviseert een <b>langere beugel</b>!</span>`;
            } else if (spaceBehindBracket < 15) {
                advice = `<span class="advice">⚠️ MAYO adviseert een <b>kortere beugel</b>!</span>`;
            }

            let suggestion = (selectedBoxWidth !== bestBoxWidth) ? 
                `<span class="suggestion">Suggestie voor <b>optimale ligboxbreedte</b>: <b>${bestBoxWidth} cm</b></span>` : '';

            document.getElementById('result').innerHTML = `
                Aantal ligplekken: ${effectiveNumberOfBoxes} <br>
                Overblijvende lengte: ${remainingLength.toFixed(2)} cm <br>
                Gekozen beugel lengte: ${beugelLength} cm <br>
                Ruimte achter beugel: ${spaceBehindBracket.toFixed(2)} cm <br>
                ${advice} <br>
                ${suggestion} <br>
                <br>
                <b>Onderdelenlijst:</b>
                <ul>
                    <li><b>Standpalen:</b> ${numberOfPosts}</li>
                    <li><b>Beugels:</b> ${numberOfBrackets}</li>
                    <li><b>Kopbomen:</b> ${numberOfHeadBoards}</li>
                    <li><b>Kopbomen eind:</b> 2</li>
                    <li><b>Aantal gegolfde schoftbomen:</b> ${numberOfWavyWithers}</li>
                    <li><b>Aantal koppelstuk:</b> ${numberOfCouplers}</li>
                    <li><b>Aantal eindstuk schoftboom:</b> ${numberOfEndPiecesWithers}</li>
                    <li><b>Aantal eindstuk kopboom/schoftboom:</b> ${numberOfEndPiecesHeadWithers}</li>
                    <li><b>Sluitplaten:</b> ${numberOfClosingPlates}</li>
                    <li><b>Betonankers:</b> ${numberOfConcreteAnchors}</li>
                    <li><b>M12x100 bouten:</b> ${numberOfM12x100}</li>
                    <li><b>M10x60 bouten:</b> ${numberOfM10x60}</li>
                    <li><b>Plastic caps:</b> ${numberOfPlasticCaps}</li>
                    <li><b>Kapbeugels:</b> ${numberOfCapBrackets}</li>
                    <li><b>U-bouten:</b> ${numberOfUBolts}</li>
                    <li><b>MAYO matras:</b> ${numberOfMAYOMattresses}</li>
                    <li><b>MAYO strip:</b> ${numberOfMAYOStrips}</li>
                    <li><b>MAYO kniebalk:</b> ${numberOfKneeRails}</li>
                </ul>
            `;
        }

        document.getElementById('print').addEventListener('click', function() {
            window.print();
        });

        document.getElementById('mail').addEventListener('click', function() {
            let resultContent = document.getElementById('result').innerHTML;
            let emailBody = encodeURIComponent(`Bekijk de resultaten van de Koeien Ligbox Calculator:\n\n${resultContent}`);
            let subject = encodeURIComponent('Koeien Ligbox Calculator Resultaten');
            let mailtoLink = `mailto:Rob@moduulbouw.nl?subject=${subject}&body=${emailBody}`;

            let a = document.createElement('a');
            a.href = mailtoLink;
            a.style.display = 'none';
            document.body.appendChild(a);

            if (a.click) {
                a.click();
            } else {
                document.getElementById('result').innerHTML += "<p class='advice'>Je browser ondersteunt de mailto-functie niet. Kopieer de resultaten en mail ze handmatig naar Rob@moduulbouw.nl.</p>";
            }

            document.body.removeChild(a);
        });

        document.getElementById('whatsapp').addEventListener('click', function() {
            let resultContent = document.getElementById('result').innerHTML;
            let contactInfo = `
Naam: ${document.getElementById('name').value}
Adres: ${document.getElementById('address').value}
Postcode: ${document.getElementById('postcode').value}
Plaats: ${document.getElementById('place').value}
Telefoon: ${document.getElementById('phone').value}
E-mail: ${document.getElementById('email').value}
`.replace(/ /g, '%20').replace(/\n/g, '%0A');
            let whatsappBody = encodeURIComponent(`Bekijk de resultaten van de Koeien Ligbox Calculator:\n\n${resultContent.replace(/ /g, '%20').replace(/\n/g, '%0A')}\n\n${contactInfo}`);
            let phoneNumber = '+31630569255';
            window.location.href = `whatsapp://send?phone=${phoneNumber}&text=${whatsappBody}`;
        });

        document.addEventListener('DOMContentLoaded', function() {
            const formInputs = document.querySelectorAll('#calculatorForm input, #calculatorForm select');
            formInputs.forEach(input => {
                input.addEventListener('change', function() {
                    calculate();
                });
            });

            // Initial calculation when the page loads
            calculate();
        });
    </script>
</body>
</html>